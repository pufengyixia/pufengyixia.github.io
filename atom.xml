<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://pufengyixia.github.io</id>
    <title>pufengyixia</title>
    <updated>2020-05-19T22:36:07.426Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://pufengyixia.github.io"/>
    <link rel="self" href="https://pufengyixia.github.io/atom.xml"/>
    <logo>https://pufengyixia.github.io/images/avatar.png</logo>
    <icon>https://pufengyixia.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, pufengyixia</rights>
    <entry>
        <title type="html"><![CDATA[如何创建Flarum自己的域名邮箱]]></title>
        <id>https://pufengyixia.github.io/post/ru-he-chuang-jian-flarum-zi-ji-de-yu-ming-you-xiang/</id>
        <link href="https://pufengyixia.github.io/post/ru-he-chuang-jian-flarum-zi-ji-de-yu-ming-you-xiang/">
        </link>
        <updated>2020-05-19T15:01:58.000Z</updated>
        <content type="html"><![CDATA[<p>Postale.io 域名邮箱，免费，匿名，唯一一点就是不支持2步验证，发邮件基本上不会被送到收件方的垃圾箱，最爽的是可以自定义邮件的重要级别：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-domain-mail-1024x511.jpg" alt="" loading="lazy"><br>
Postale 的官网：https://postale.io/</p>
<p>需要准备的东西：1个域名+1个CloudFlare账户；</p>
<p>域名可以在任何地方购买，我以在NameSilo购买的域名为例：然后修改域名的NS，如图：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/namesilo-change-ns.jpg" alt="" loading="lazy"><br>
然后在CloudFlare中添加你的域名，并按照流程一步一步的操作，获取到你CloudFlare的NS地址：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/cloudflare-ns.jpg" alt="" loading="lazy"><br>
把你的NameSilo域名下面的3个NS地址删除，然后替换成CloudFlare给出的2个NS地址；点击保存，你的域名解析就可以完全交给CF了.</p>
<p>接下来，注册一个Postale的账户；我以我的域名ad-mit.com为例，注册流程如图：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s1.jpg" alt="" loading="lazy"><br>
接下来，创建成功，如图，这个页面是包含了MX的解析和TXT的验证信息：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s2-1024x593.jpg" alt="" loading="lazy"><br>
添加MX的解析如图（参考配置页面信息，每个人应该都一样）：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s3.jpg" alt="" loading="lazy"><br>
完成之后点击保存<br>
添加TXT记录第一条（参考配置页面信息，每个人应该都一样）：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s4.jpg" alt="" loading="lazy"><br>
添加TXT记录第二条（参考配置页面信息，每个人应该都一样）：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s5.jpg" alt="" loading="lazy"><br>
添加TXT记录第三条（参考配置页面信息，这是每个人都不一样的地方）：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s6.jpg" alt="" loading="lazy"><br>
添加完记录之后，返回Postale网站，点击确认检查记录：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s7-1024x565.jpg" alt="" loading="lazy"><br>
如果所有设置都是正确的，你会获得用户名和密码：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s8-1024x690.jpg" alt="" loading="lazy"><br>
最后，进入邮箱，给自己的QQ邮箱发送一封邮件测试，看看你能否顺利的收到邮件。如果收到了，在回复一下，看看你的域名邮箱能否收到回复邮件。</p>
<p>你也可以进入后台管理面板，创建更多的不同前缀的域名邮箱，如图：<br>
<img src="https://www.fi-ads.com/wp-content/uploads/2020/05/postale-s91.jpg" alt="" loading="lazy"><br>
到这里，你的Postale邮箱基本上就已经完全设置好了。可以正常的收发邮件。</p>
<p>使用您喜欢的邮件客户端配置SMTP</p>
<p>您可以将域电子邮件与任何喜欢的邮件客户端（Gmail，Outlook，Thunderbird等）一起使用。只需打开客户端，然后使用以下设置添加您的帐户（将john.doe@yourdomain.com替换为您的实际域电子邮件）。</p>
<p>SMTP<br>
主办	mail.postale.io<br>
港口	TLS 为587 或 SSL 为465<br>
SSL / TLS	是，需要验证<br>
用户名	john.doe@yourdomain.com</p>
<p>IMAP（首选）或POP3<br>
主办	mail.postale.io<br>
港口	993为IMAP 或 995 POP3<br>
SSL / TLS	是<br>
用户名	john.doe@yourdomain.com</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[针对Flarums的SEO和robot.txt优化]]></title>
        <id>https://pufengyixia.github.io/post/zhen-dui-flarums-de-seo-he-robottxt-you-hua/</id>
        <link href="https://pufengyixia.github.io/post/zhen-dui-flarums-de-seo-he-robottxt-you-hua/">
        </link>
        <updated>2020-05-16T20:26:46.000Z</updated>
        <content type="html"><![CDATA[<p>User-agent: *<br>
Disallow: /u/</p>
<p>Sitemap: https://www.域名.com/sitemap-post.xml</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CentOS 7 安装Flarum中文搜索插件]]></title>
        <id>https://pufengyixia.github.io/post/centos-7-an-zhuang-flarum-zhong-wen-sou-suo-cha-jian/</id>
        <link href="https://pufengyixia.github.io/post/centos-7-an-zhuang-flarum-zhong-wen-sou-suo-cha-jian/">
        </link>
        <updated>2020-05-16T18:39:54.000Z</updated>
        <content type="html"><![CDATA[<p>0×0 系统更新</p>
<p>yum update</p>
<p>0×1 安装 gcc</p>
<p>yum install gcc*</p>
<p>0×2 安装 zlib</p>
<p>yum install zlib*</p>
<p>0×3 创建 xunsearch 安装目录</p>
<p>cd<br>
mkdir -p /usr/local/xunsearch</p>
<p>0×4 下载 xunsearch</p>
<p>cd /usr/local/xunsearch<br>
wget http://www.xunsearch.com/download/xunsearch-full-latest.tar.bz2<br>
tar -xjf xunsearch-full-latest.tar.bz2</p>
<p>0×5 安装 xunsearch</p>
<p>cd /usr/local/xunsearch/xunsearch-full-1.4.14<br>
sh setup.sh</p>
<p>0×6 启动 xunsearch</p>
<p>cd /usr/local/xunsearch<br>
bin/xs-ctl.sh restart</p>
<p>0×7 开机启动 xunsearch</p>
<p>echo '/usr/local/xunsearch/bin/ &amp;&amp; ./xs-ctl.sh -b inet start' &gt;&gt; /etc/rc.d/rc.local</p>
<p>0×8 安装中文搜索插件</p>
<p>cd /www/wwwroot/bbs.cltserver.xyz<br>
composer require jjandxa/flarum-ext-chinese-search</p>
<p>0×9 开启插件后，测试结果</p>
<p>./vendor/bin/xs search -p ./vendor/jjandxa/flarum-ext-chinese-search/app.ini -q 关键词</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Centos 7安装与配置Flarum]]></title>
        <id>https://pufengyixia.github.io/post/centos-7-an-zhuang-yu-pei-zhi-flarum/</id>
        <link href="https://pufengyixia.github.io/post/centos-7-an-zhuang-yu-pei-zhi-flarum/">
        </link>
        <updated>2020-05-16T17:15:33.000Z</updated>
        <content type="html"><![CDATA[<pre><code>Flarum 是一款非常棒的开源论坛程序，Halo 的论坛 就是用 Flarum 搭建的。之前有人问过我 Flarum 如何搭建，所以下面讲一下 Flarum 的搭建过程（btw，官方的搭建教程实在草率）。
</code></pre>
<p>前提</p>
<pre><code>域名需要提前解析。
注意服务器是否需要备案，如果没备案，会被 x 掉。
有一定的 Linux 基础。
</code></pre>
<p>环境说明</p>
<pre><code>Linux Server（本文是用的 CentOS 7.7）
Apache 或者 Nginx（本文是用的 Nginx）
PHP 7.3+
PHP 拓展： curl, dom, gd, json, mbstring, openssl, pdo_mysql, tokenizer, zip, fileinfo
MySQL 5.7+ 
</code></pre>
<p>部署环境安装<br>
更新服务器软件包</p>
<p>yum update -y</p>
<p>安装 Nginx/PHP/MySQL</p>
<pre><code>这里我们使用 OneinStack 一键安装，人生苦短，懒得自己编译了（绝不是因为我不会🌚）。当然，如果有时间，自己编译安装更好。
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://cdn.ryanc.cc/img/blog/thumbnails/38771f8f695f99bd0539db42af0f2e69.png" alt="OneInStack" loading="lazy"></figure>
<p>如上图，选择好需要的软件以及版本后，复制自动安装命令到服务器执行就行了，安装过程可能会有点慢，耐心等待就行了。</p>
<p>wget -c http://mirrors.linuxeye.com/oneinstack-full.tar.gz &amp;&amp; tar xzf oneinstack-full.tar.gz &amp;&amp; ./oneinstack/install.sh --nginx_option 1 --php_option 8 --phpcache_option 1 --php_extensions fileinfo --phpmyadmin  --db_option 2 --dbinstallmethod 1 --dbrootpwd oneinstack --pureftpd  --redis  --memcached  --reboot</p>
<pre><code>需要注意的是，PHP 扩展中的 fileinfo 一定要勾选，Flarum 官方文档居然没有写需要这个扩展。(没错，这里我被坑了，嘤嘤嘤嘤~)
</code></pre>
<p>安装完成应该会打印出这些东西：</p>
<figure data-type="image" tabindex="2"><img src="https://cdn.ryanc.cc/img/blog/thumbnails/6902ec905fc810f533910402cbd43662.png" alt="Oneinstack-success" loading="lazy"></figure>
<p>安装 Composer</p>
<p>php -r &quot;copy('https://install.phpcomposer.com/installer', 'composer-setup.php');&quot;</p>
<p>php composer-setup.php</p>
<p>php -r &quot;unlink('composer-setup.php');&quot;</p>
<p>mv composer.phar /usr/local/bin/composer</p>
<p>由于 Composer 的服务器在国外，可能导致下载 Flarum 已经依赖包会很慢，所以我们需要更换一下源地址。至于 Composer 是啥，其实就是 PHP 的一个包管理，类似 Java 的 Maven 和 Gradle 工具。</p>
<p>composer config -g repo.packagist composer https://packagist.phpcomposer.com</p>
<p>安装 Flarum</p>
<p>进入到 oneinstack 目录，执行 vhost.sh 脚本新建一个网站<br>
<img src="https://cdn.ryanc.cc/img/blog/thumbnails/c608cda88c610ae302e895bf723e3515.png" alt="OneInStack-vhost" loading="lazy"></p>
<p>然后会提示 SSL 证书选项，网站目录之类的东西，按照自己的需求选择即可。</p>
<p>创建完成后应该是这样子。<br>
<img src="https://cdn.ryanc.cc/img/blog/thumbnails/56c950fe8a52e135b217e75026d48de8.png" alt="OneInStack-new-site" loading="lazy"></p>
<p>然后进入网站目录执行：</p>
<p>cd /data/wwwroot/bbs.ryanwang.me</p>
<p>composer create-project flarum/flarum . --stability=beta</p>
<p>然后等待下载 Flarum 以及对应的依赖即可，安装完成应该是这个样子的：<br>
<img src="https://cdn.ryanc.cc/img/blog/thumbnails/34286be66336e95f86ff2f59349cfa70.png" alt="Flarum-install-success" loading="lazy"></p>
<p>配置运行</p>
<p>上面其实就已经安装好了 Flarum，但是还需要进一步配置才能正确运行。<br>
创建数据库</p>
<p>登陆 MySQL：</p>
<p>mysql -u root -p密码flarum</p>
<p>创建数据库：</p>
<p>create database flarum character set utf8mb4 collate utf8mb4_bin;</p>
<pre><code>这里的字符集一定要是 utf8mb4，至于为什么是 utf8mb4，参考：https://www.jianshu.com/p/6967ce16a202。也可以进数据库后台创建数据库，比如在谷歌浏览器输入http://188.88.88.88/phpMyAdmin ，用户名一般是root，密码是前面在我们使用OneinStack一键安装时填入的数据库密码oneinstack。创建数据库flarum，数据库字符集为utf8mb4。
</code></pre>
<p>修改 Nginx 配置</p>
<p>进入 Nginx 配置文件目录：</p>
<p>cd /usr/local/nginx/conf/vhost</p>
<p>修改网站的配置文件：</p>
<p>nano nginx.conf</p>
<p>需要修改的地方：</p>
<pre><code>root：需要在路径后面加上 public，比如我的原本是 root /data/wwwroot/bbs.ryanwang.me;，需要修改为 root /data/wwwroot/bbs.ryanwang.me/public;。
引入 Flarum 提供的配置，在nginx.conf配置文件末尾 server }大括号}中任意位置加上 include /data/wwwroot/bbs.ryanwang.me/.nginx.conf;，bbs.ryanwang.me 为网站目录名。
比如我的是  } include /data/wwwroot/bbs.ryanwang.me/.nginx.conf;}
</code></pre>
<p>最后的配置示例：</p>
<p>server {<br>
listen 80;<br>
listen 443 ssl http2;<br>
ssl_certificate /usr/local/nginx/conf/ssl/bbs.ryanwang.me.crt;<br>
ssl_certificate_key /usr/local/nginx/conf/ssl/bbs.ryanwang.me.key;<br>
ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;<br>
ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;<br>
ssl_prefer_server_ciphers on;<br>
ssl_session_timeout 10m;<br>
ssl_session_cache builtin:1000 shared:SSL:10m;<br>
ssl_buffer_size 1400;<br>
add_header Strict-Transport-Security max-age=15768000;<br>
ssl_stapling on;<br>
ssl_stapling_verify on;<br>
server_name bbs.ryanwang.me;<br>
access_log /data/wwwlogs/bbs.ryanwang.me_nginx.log combined;<br>
index index.html index.htm index.php;<br>
root /data/wwwroot/bbs.ryanwang.me/public;<br>
if (<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …rn 301 https://'>ssl_protocol = &quot;&quot;) { return 301 https://</span>host$request_uri; }</p>
<p>include /usr/local/nginx/conf/rewrite/other.conf;<br>
#error_page 404 /404.html;<br>
#error_page 502 /502.html;</p>
<p>location ~ [^/].php(/|$) {<br>
#fastcgi_pass remote_php_ip:9000;<br>
fastcgi_pass unix:/dev/shm/php-cgi.sock;<br>
fastcgi_index index.php;<br>
include fastcgi.conf;<br>
}</p>
<p>location ~ .<em>.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {<br>
expires 30d;<br>
access_log off;<br>
}<br>
location ~ .</em>.(js|css)?$ {<br>
expires 7d;<br>
access_log off;<br>
}<br>
location ~ /(.user.ini|.ht|.git|.svn|.project|LICENSE|README.md) {<br>
deny all;<br>
}</p>
<p>include /data/wwwroot/bbs.ryanwang.me/.nginx.conf;</p>
<p>}</p>
<p>最后我们需要检查 Nginx 配置是否有误并重载 Nginx 配置：</p>
<p>nginx -t</p>
<p>nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</p>
<p>nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</p>
<p>nginx -s reload</p>
<p>Flarum 安装引导</p>
<p>如果出现下面的情况：<br>
<img src="https://cdn.ryanc.cc/img/blog/thumbnails/7243e69819dd45fe52789c07ad88351f.png" alt="Flarum-install-page-1" loading="lazy"></p>
<p>是因为没有对网站目录/data/wwwroot/bbs.ryanwang.me写入的权限，我们加一下权限即可：</p>
<h1 id="datawwwrootbbsryanwangme为网站目录名称">/data/wwwroot/bbs.ryanwang.me为网站目录名称</h1>
<p>chmod -R 775 /data/wwwroot/bbs.ryanwang.me</p>
<p>然后刷新页面就可以看到安装表单了。<br>
<img src="https://cdn.ryanc.cc/img/blog/thumbnails/6aa3c74ae3c3e54f7579b9ad34884dd8.png" alt="Flarum-install-page-2" loading="lazy"></p>
<p>然后填写数据库信息以及管理员信息，点击安装即可。这里填数据库名的时候要注意一下，<br>
一般数据库名填root，数据库用户名才是前面你填的flarum。<br>
<img src="https://www.itnt.xyz/wp-content/uploads/2019/12/Snipaste_2019-12-12_16-02-05-807x1024.jpg" alt="Flarum-install-Mysql" loading="lazy"></p>
<p>安装部署部分到此结束。</p>
<p>常用插件安装</p>
<pre><code>安装完成后会发现不支持中文，所以我们需要安装中文语言包。还有一些常用的插件。更多插件推荐，请前往此处https://bbs.csur.fun/d/84-flarum 查看。
建议每次装完插件后，运行一次清理缓存命令 php flarum cache:clear

#　/data/wwwroot/bbs.ryanwang.me为网站目录名称，因为安装插件需在 Flarum 根目录执行。

cd /data/wwwroot/bbs.ryanwang.me
</code></pre>
<p>#　简体中文语言包</p>
<pre><code>composer require littlegolden/flarum-lang-simplified-chinese
</code></pre>
<p>#　繁体中文语言包</p>
<pre><code>composer require csineneo/lang-traditional-chinese
</code></pre>
<p>#　编辑器 Emoji 表情选择框</p>
<pre><code>composer require clarkwinkelmann/flarum-ext-emojionearea
</code></pre>
<p>#　导航栏菜单插件</p>
<pre><code>composer require fof/links
</code></pre>
<p>#　最佳回答</p>
<pre><code>composer require wiwatsrt/flarum-ext-best-answer
</code></pre>
<p>#　显示帖子阅读次数</p>
<pre><code>composer require michaelbelgium/flarum-discussion-views
</code></pre>
<p>#　论坛用户列表</p>
<pre><code>composer require avatar4eg/flarum-ext-users-list
</code></pre>
<p>#　生成静态页面</p>
<pre><code>composer require fof/pages
</code></pre>
<p>#　在帖子中直接生成外链预览小图（此插件已标记为弃用，请勿再安装）</p>
<pre><code>composer require zerosonesfun/flarum-ext-link-previews
</code></pre>
<p>#　上传文件</p>
<pre><code>composer require fof/upload
</code></pre>
<p>#　插件商店</p>
<pre><code>composer require extiverse/bazaar
</code></pre>
<p>#　Sitemap 生成器</p>
<pre><code>composer require flagrow/sitemap
</code></pre>
<p>#　Fancybox 插件</p>
<pre><code>composer require squeevee/flarum-ext-fancybox
</code></pre>
<p>安装完成后去后台启用即可（后台地址：网址/admin）<br>
<img src="https://cdn.ryanc.cc/img/blog/thumbnails/168c9ee1aecd24300d8bdeb92755770b.png" alt="Flarum-extension" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[如何在CentOS 7上添加Swap 交换空间]]></title>
        <id>https://pufengyixia.github.io/post/ru-he-zai-centos-7-shang-tian-jia-swap-jiao-huan-kong-jian/</id>
        <link href="https://pufengyixia.github.io/post/ru-he-zai-centos-7-shang-tian-jia-swap-jiao-huan-kong-jian/">
        </link>
        <updated>2020-05-16T17:11:02.000Z</updated>
        <content type="html"><![CDATA[<p>介绍</p>
<p>增加服务器交换空间是提高服务器响应速度和防止应用程序内存不足错误的最简单方法之一。交换是存储驱动器上的一个区域，操作系统可以在其中临时存储无法再保存在内存中的数据。</p>
<p>需要注意的是，这使您能够增加服务器可以在其工作内存中保留的信息量。读取和写入交换要比使用内存慢，但是当服务器内存不足时，它可以提供良好的安全性。</p>
<p>如果不进行交换，则内存不足的服务器可能会开始杀死应用程序以释放内存，甚至崩溃。这可能会导致您丢失未保存的数据或遭受停机。为了确保可靠的数据访问，某些应用程序需要交换功能。</p>
<p>在本指南中，我们将介绍如何在CentOS 7服务器上创建和启用交换文件。<br>
注意</p>
<p>尽管通常建议对使用传统旋转硬盘驱动器的系统进行交换，但是与SSD一起使用交换可能会导致硬件随时间推移而出现问题。基于此考虑，我们不建议在DigitalOcean或任何其他使用SSD存储的提供商上启用交换。这样做可能会影响您和您的邻居的基础硬件的可靠性。</p>
<p>如果需要提高服务器的性能，建议升级您的Droplet。通常，这将导致更好的结果，并减少导致可能影响服务的硬件问题的可能性。<br>
先决条件</p>
<p>在开始使用本指南之前，首先需要完成一些步骤。</p>
<p>您将需要安装并配置具有sudo特权的非root用户的CentOS 7服务器。如果尚未执行此操作，则可以执行CentOS 7初始服务器设置指南中的步骤1-4 来创建此帐户。</p>
<p>一旦拥有非root用户，就可以使用它来SSH到CentOS服务器中，并继续安装交换文件。<br>
检查系统以获取交换信息</p>
<p>在开始之前，我们应该看一下服务器的存储空间，看是否已经有一些可用的交换空间。虽然我们可以有多个交换文件或交换分区，但是通常一个就足够了。</p>
<p>我们可以使用swapon通用交换实用程序来查看系统是否具有任何已配置的交换。带有该-s标志，swapon将在我们的存储设备上显示交换使用情况和可用性的摘要：</p>
<p>swapon -s</p>
<p>如果命令未返回任何内容，则摘要为空，并且不存在交换文件。</p>
<p>检查交换空间的另一种方法是使用free实用程序，它向我们显示了系统的整体内存使用情况。我们可以通过键入以下内容来查看当前的内存和交换使用情况（以兆字节为单位）：</p>
<p>free -m</p>
<pre><code>         total       used       free     shared    buffers     cached
</code></pre>
<p>Mem:          3953        315       3637          8         11        107<br>
-/+ buffers/cache:        196       3756<br>
Swap:            0          0       4095</p>
<p>如您所见，我们在系统中的总交换空间为0。这与我们看到的相符swapon。<br>
检查可用的存储空间</p>
<p>为交换分配空间的典型方法是使用专用于该任务的单独分区。但是，由于硬件或软件的限制，改变分区方案并非总是可能的。幸运的是，我们可以轻松地创建一个位于现有分区上的交换文件。</p>
<p>在执行此操作之前，我们应该了解当前的驱动器使用情况。我们可以通过输入以下内容获取此信息：</p>
<p>df -h</p>
<p>Filesystem      Size  Used Avail Use% Mounted on<br>
/dev/vda1        59G  1.5G   55G   3% /<br>
devtmpfs        2.0G     0  2.0G   0% /dev<br>
tmpfs           2.0G     0  2.0G   0% /dev/shm<br>
tmpfs           2.0G  8.3M  2.0G   1% /run<br>
tmpfs           2.0G     0  2.0G   0% /sys/fs/cgroup</p>
<p>注意：该-h标志只是告诉您dh以易于阅读的格式输出驱动器信息。例如，不是输出分区中的原始内存块数，而是df -h以M（兆字节）或G（千兆字节）为单位告诉我们空间使用情况和可用性。</p>
<p>如第一行所示，我们的存储分区有59 GB可用空间，因此我们有很大的空间可以使用。请记住，这是在一个新的中型VPS实例上，因此您的实际用法可能会有很大不同。</p>
<p>尽管对于交换空间的适当大小有很多意见，但这实际上取决于您的应用程序要求和您的个人喜好。通常，等于或大于系统内存量的内存是一个不错的起点。</p>
<p>由于我的系统具有4 GB的内存，而将其加倍将占用比我愿意分配的更大的存储空间，因此，我将创建4 GB的交换空间以匹配系统的内存。<br>
创建交换文件</p>
<p>既然我们知道了可用的存储空间，就可以在文件系统中创建交换文件了。我们将swapfile在根（/）目录中创建一个名为的文件，尽管您可以根据需要将其命名为其他名称。该文件必须为交换文件分配所需的空间量，并且应在一个连续的块中创建它。</p>
<p>最好的方法是使用该dd实用程序。此命令将创建一个4 GB的文件：</p>
<p>sudo dd if=/dev/zero of=/swapfile count=4096 bs=1MiB</p>
<p>输入密码以授权sudo特权后，将创建交换文件。这可能需要一些时间，然后提示会返回给您。我们可以使用以下命令验证是否为交换保留了正确的空间量ls：</p>
<p>ls -lh /swapfile</p>
<p>-rw-r--r-- 1 root root 4.0G Oct 30 11:00 /swapfile</p>
<p>如您所见，我们的交换文件是在预留了正确数量的空间的情况下创建的。<br>
启用交换文件</p>
<p>现在，我们的文件已创建，但是我们的系统不知道应该将其用于交换。我们需要告诉我们的系统将此文件格式化为交换文件，然后将其启用。</p>
<p>在执行此操作之前，我们应该调整交换文件上的权限，以使除根帐户之外的任何人都无法读取该文件。允许其他用户读取或写入此文件将带来巨大的安全风险。我们可以使用以下命令锁定权限chmod：</p>
<p>sudo chmod 600 /swapfile</p>
<p>这将仅将读取和写入权限限制为对根帐户。我们可以通过ls -lh再次使用来验证交换文件是否具有正确的权限：</p>
<p>ls -lh /swapfile</p>
<p>-rw------- 1 root root 4.0G Oct 30 11:00 /swapfile</p>
<p>现在我们的交换文件更安全了，我们可以通过输入以下内容来告诉我们的系统设置交换空间以供使用：</p>
<p>sudo mkswap /swapfile</p>
<p>Setting up swapspace version 1, size = 4194300 KiB<br>
no label, UUID=b99230bb-21af-47bc-8c37-de41129c39bf</p>
<p>现在，我们的交换文件已准备好用作交换空间。我们可以通过输入以下内容开始使用它：</p>
<p>sudo swapon /swapfile</p>
<p>为了验证该过程是否成功，我们可以检查系统现在是否报告交换空间：</p>
<p>swapon -s</p>
<p>Filename                Type        Size    Used    Priority<br>
/swapfile               file        4194300 0     -1</p>
<p>此输出确认我们有一个新的交换文件。我们可以free再次使用该实用工具来证实我们的发现：</p>
<p>free -m</p>
<pre><code>         total       used       free     shared    buffers     cached
</code></pre>
<p>Mem:          3953        315       3637          8         11        107<br>
-/+ buffers/cache:        196       3756<br>
Swap:         4095          0       4095</p>
<p>我们的交换已成功建立，并且我们的操作系统将根据需要开始使用它。<br>
使交换文件永久</p>
<p>目前，我们的交换文件已启用，但是当我们重新启动时，服务器将不会自动启用该文件供使用。我们可以通过修改fstab文件来更改它，该文件是管理文件系统和分区的表。</p>
<p>sudo在文本编辑器中使用特权编辑文件：</p>
<p>sudo nano /etc/fstab</p>
<p>在文件的底部，您需要添加一行以告知操作系统自动使用您创建的交换文件：</p>
<p>/swapfile   swap    swap    sw  0   0</p>
<p>完成添加行后，可以保存并关闭文件。服务器将在每次启动时检查此文件，因此从现在开始可以使用交换文件。<br>
调整交换设置（可选）</p>
<p>您可以配置一些选项，这些选项在处理交换时会影响系统的性能。这些配置在大多数情况下是可选的，您所做的更改将取决于您的应用程序需求和您的个人喜好。<br>
轻浮</p>
<p>该swappiness参数确定系统多久将内存中的数据交换到交换空间一次。这是一个介于0和100之间的值，代表将触发使用交换的内存使用百分比。</p>
<p>值接近零时，除非绝对必要，否则系统不会将数据交换到驱动器。请记住，与交换文件的交互是“昂贵的”，因为它们比与内存的交互要慢得多，并且读写速度上的这种差异可能会导致应用程序性能的显着降低。告诉系统不要过多依赖交换，通常会使您的系统更快。</p>
<p>接近100的值将尝试交换更多数据，以保持更多的可用内存。在某些情况下，这可能是更好的选择，具体取决于应用程序的内存配置文件或服务器的用途。</p>
<p>通过读取swappiness配置文件，我们可以看到当前的swappiness值：</p>
<p>cat /proc/sys/vm/swappiness</p>
<p>30</p>
<p>CentOS 7的默认可交换性设置为30，对于大多数台式机和本地服务器来说，这是一个合理的中间立场。对于VPS系统，我们可能希望将其移近0。</p>
<p>我们可以使用以下sysctl命令将swappiness设置为其他值。例如，要将swappiness设置为10，我们可以输入：</p>
<p>sudo sysctl vm.swappiness=10</p>
<p>vm.swappiness = 10</p>
<p>此设置将持续到下一次重新启动。为了使设置在两次重启之间保持不变，我们可以将输出行添加到我们的sysctl配置文件中：</p>
<p>sudo nano /etc/sysctl.conf</p>
<p>将您的swappiness设置添加到文件的底部：</p>
<p>vm.swappiness = 10</p>
<p>完成添加行后，可以保存并关闭文件。现在，服务器将自动将swappiness设置为您在每次启动时声明的值。<br>
缓存压力</p>
<p>您可能要修改的另一个相关值是vfs_cache_pressure。此设置影响特殊文件系统元数据条目的存储。不断读取和刷新此信息通常会非常昂贵，因此将其长时间存储在缓存中对于系统的性能而言非常出色。</p>
<p>您可以通过proc再次查询文件系统来查看此缓存压力的当前值：</p>
<p>cat /proc/sys/vm/vfs_cache_pressure</p>
<p>100</p>
<p>由于当前已配置，因此我们的系统太快地从缓存中删除了索引节点信息。我们可以使用以下命令将其设置为更保守的设置，例如50 sysctl：</p>
<p>sudo sysctl vm.vfs_cache_pressure=50</p>
<p>vm.vfs_cache_pressure = 50</p>
<p>同样，这仅对我们当前的会话有效。我们可以通过将其添加到配置文件中来更改它，就像我们对swappiness设置所做的那样：</p>
<p>sudo nano /etc/sysctl.conf</p>
<p>在底部，添加用于指定新值的行：</p>
<p>vm.vfs_cache_pressure = 50</p>
<p>完成添加行后，可以保存并关闭文件。服务器现在将自动将缓存压力设置为您在每次启动时声明的值。<br>
结论</p>
<p>通过遵循本指南中的步骤，您将为服务器提供一些内存使用方面的喘息空间。交换空间对于避免一些常见问题非常有用。</p>
<p>如果遇到OOM（内存不足）错误，或者发现系统无法使用所需的应用程序，则最佳解决方案是优化应用程序配置或升级服务器。但是，配置交换空间可以为您提供更大的灵活性，并可以帮助您在功能不那么强大的服务器上花费时间。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Flarum页脚心动插件]]></title>
        <id>https://pufengyixia.github.io/post/flarum-ye-jiao-xin-dong-cha-jian/</id>
        <link href="https://pufengyixia.github.io/post/flarum-ye-jiao-xin-dong-cha-jian/">
        </link>
        <updated>2020-05-16T12:51:09.000Z</updated>
        <content type="html"><![CDATA[<pre><code>下载下面的文件，上传到服务器 Flarum 安装目录 &gt; public

https://bbs.csur.fun/selfJS/JSClickBubble.js

在自定义页脚加入下方代码

&lt;script src=&quot;https://你的 Flarum 站点网址/JSClickBubble.js&quot;&gt;&lt;/script&gt;</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Flarum发帖实用工具]]></title>
        <id>https://pufengyixia.github.io/post/flarum-wang-zhan-shi-yong-gong-ju/</id>
        <link href="https://pufengyixia.github.io/post/flarum-wang-zhan-shi-yong-gong-ju/">
        </link>
        <updated>2020-05-16T12:37:53.000Z</updated>
        <content type="html"><![CDATA[<p>Markdown 发帖教程<br>
<a href="https://www.runoob.com/markdown/md-tutorial.html">https://www.runoob.com/markdown/md-tutorial.html</a></p>
<p>Squoosh 谷歌图片压缩<br>
<a href="https://squoosh.app/">https://squoosh.app/</a></p>
<p>SM.MS 外链图床<br>
<a href="https://sm.ms/">https://sm.ms/</a></p>
<p>TMP 临时文件中转<br>
<a href="https://app.tmp.link/">https://app.tmp.link/</a></p>
<p>Zen - Online Text Editor<br>
<a href="https://zen.unit.ms/">https://zen.unit.ms/</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Flarum标签美化]]></title>
        <id>https://pufengyixia.github.io/post/flarum-biao-qian-mei-hua/</id>
        <link href="https://pufengyixia.github.io/post/flarum-biao-qian-mei-hua/">
        </link>
        <updated>2020-05-16T12:31:37.000Z</updated>
        <content type="html"><![CDATA[<p>HTML颜色代码<br>
<a href="https://htmlcolorcodes.com/zh/">https://htmlcolorcodes.com/zh/</a></p>
<p>标签配色代码<br>
<a href="https://www.happyhues.co/">https://www.happyhues.co/</a></p>
<p>Awesome免费图标<br>
<a href="https://fontawesome.com/icons?m=free">https://fontawesome.com/icons?m=free</a></p>
<p>DeepL翻译<br>
<a href="https://www.deepl.com/translator">https://www.deepl.com/translator</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Flarum 中文优化版]]></title>
        <id>https://pufengyixia.github.io/post/flarum-zhong-wen-you-hua-ban/</id>
        <link href="https://pufengyixia.github.io/post/flarum-zhong-wen-you-hua-ban/">
        </link>
        <updated>2020-05-16T12:18:53.000Z</updated>
        <content type="html"><![CDATA[<p>FlarumChina版<br>
<a href="https://gitee.com/FlarumChina/FlarumChina/releases">https://gitee.com/FlarumChina/FlarumChina/releases</a></p>
<p>Flarum 中文社区版<br>
<a href="https://gitee.com/FlarumCN/Flarum/releases">https://gitee.com/FlarumCN/Flarum/releases</a></p>
<p>0xFFFF 社区版<br>
<a href="https://github.com/0xffff-one/core/releases">https://github.com/0xffff-one/core/releases</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CSUR站点全局自定义 CSS 样式分享]]></title>
        <id>https://pufengyixia.github.io/post/csur-zhan-dian-quan-ju-zi-ding-yi-css-yang-shi-fen-xiang/</id>
        <link href="https://pufengyixia.github.io/post/csur-zhan-dian-quan-ju-zi-ding-yi-css-yang-shi-fen-xiang/">
        </link>
        <updated>2020-05-16T11:47:12.000Z</updated>
        <content type="html"><![CDATA[<p>复制CSS 样式到后台管理-外观-自定义样式，选择两种颜色作为论坛主色调。第一种作为突出显示颜色#F18300，第二种作为背景等元素的颜色#E7672E，然后启用彩色导航栏。</p>
<pre><code class="language-/*">.UserDirectoryList-loadMore .Button,
.DiscussionList-loadMore .Button {
	 width: 50%;
         border-radius: 30px;
         margin-top: 30px;
}
.UserDirectoryList-loadMore {
    text-align: center;
}
@media (max-width: 767px) {
	.DiscussionList-loadMore {
		padding-left: 15px;
		padding-right: 15px;
	}
}

/* 替换点赞, 回复按钮 */
.item-like .Button--link .Button-label,
.item-reply .Button--link .Button-label{
    display: none;
}
.item-like .Button:before {
    font-family: 'Font Awesome 5 Free';
    font-weight: 600;
    font-size: 14px;
    content: '\f164';
    vertical-align: -1px;
}
.item-reply .Button--link:before {
    font-family: 'Font Awesome 5 Free';
    font-weight: 600;
    font-size: 15px;
    content: '\f3e5';
    margin-right: 4px;
    vertical-align: -2px;
}

/* 首页主题点击量对齐 */
@media (min-width: 768px){
	.IndexPage li.item-discussion-views {
		margin-right: -70px;
		width: 55px;
	}
}

/* 反应按钮位置 */
.Post-actions .Reactions .Reactions--ShowReactions {
    margin-top: 11px;
}

/* 表格阴影去除 */
.Post .Post-body table{
	box-shadow: none;
}

/* 卡片主题 */
.IndexPage .DiscussionListItem,
.UserPage .DiscussionListItem,
.DiscussionPage-discussion .DiscussionListItem{ 
    transition: all 0.1s; /* 动画时间 */
}
@media (min-width: 991px){
    .IndexPage .DiscussionList-discussions&gt;li:not(:first-child) .DiscussionListItem:hover{ /* 悬浮效果 */
        transform: scale(1.01); /* 缩放 */
    }
}

@media (min-width: 768px){ /* pc 端 */
.IndexPage .DiscussionListItem-content,
.UserPage .DiscussionListItem-content,
.DiscussionPage-discussion .DiscussionListItem-content{ /* 首页、用户页、讨论页卡片大小、描边 */
    padding-left: 80px;
    padding-right: 80px;
    padding-top: 10px;
    border-radius: 8px;
    padding-bottom: 10px;
    border:1px solid #dbdfe6!important;
}
.IndexPage .Post.CommentPost,
.UserPage .Post.CommentPost,
.DiscussionPage-discussion .Post.CommentPost {
    margin-top:20px;
    border-radius: 8px;
    border: 1px solid #dbdfe6 !important;
}

.IndexPage .DiscussionListItem-info&gt;.item-tags,
.UserPage .DiscussionListItem-info&gt;.item-tags {top: 23px !important;}
.DiscussionListItem {
    position: relative;
    margin-right: 0;
    padding-right: 0;
    padding-left: 0;
    margin-left: 0;
    border-radius: 8px;
    margin-top:15px;
}}

@media (min-width: 768px){
.IndexPage .DiscussionListItem:hover {
background-color: #fff;
-webkit-box-shadow: 0px 8px 24px 3px rgba(84,102,134,0.1) !important;
box-shadow: 0px 8px 24px 3px rgba(84,102,134,0.1) !important;
}}
/* banner */
.WelcomeHero{color: #282828;}
.Hero h2 { font-size: 25px; font-weight: 700;}
.Hero { box-shadow: 0px 1px 10px 0 rgba(151,158,181,0.28); background-color: #fff; margin-bottom: 15px;}
/*.DiscussionHero .TagsLabel .TagLabel { color: #4D698E; }*/
.WelcomeHero .Hero-subtitle {color: #000;}

/* 未读 */
.unread .DiscussionListItem-title:after {
font-family: &quot;Font Awesome 5 Free&quot;;
font-weight: 600;
content: &quot;\f111&quot;;
color: #667c99;
margin-left: 2px ;
margin-top:-6px;
transform: scale(0.5);
position:absolute;}
.PostsUserPage .PostsUserPage-list .Post{
    padding-top:20px;
}
/* 会员名录、资料卡片 */
.UserDirectoryList .UserCard--directory {
    box-shadow: 0 2px 6px transparent!important;
    background-color: transparent!important;
    border: 2px solid rgba(0,0,0,.1);
    margin-bottom: 15px!important;
    border-radius: 6px!important;
}
.UserCard, .UserCard a {
    color: #40444a;
}
.UserCard {
    background: #e8ecf3;
    background-size: 100% 100%;
}
.darkenBackground {
    background: #fff;
    border-radius: 6px!important;
}
.Badge--social {
    color: #4d698e!important;
}
/* 搜索框 */
.Search-input input {
    border-radius: 30px;
}

ul.IndexPage-toolbar-action&gt;li:not(:first-child) {
    margin-top: 5px;
}
.IndexPage-toolbar-action {
    margin-left: 15px;
}
.UserCard.UserCard--popover,
.UserCard.Hero.UserHero {
    background: none !important;
}

.UserCard .Button {
    color: #667c99;
    background: rgba(0,0,0,.1);
}
/* 欢迎横幅 */
.Hero {
    background: url(https://i.loli.net/2020/04/06/X7yt1xWieuTShnE.png) no-repeat top fixed;
    text-align: center;
    color: #FFFFFF;
    height: 180px;
    width: 100%;
}</code></pre>
]]></content>
    </entry>
</feed>